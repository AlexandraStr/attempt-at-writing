$(function() {
    var a = $(".slide_step li").outerWidth(!0), b = 0, c = 0, d = 0;
    $(window).resize(function() {
        var a = $(".carousel_wrapper").width();
        $(".slide_step").css({
            width: a
        });
    }), $(".arrow").click(function() {
        function e(b) {
            var c = $(k).length, d = -a * (c - 1);
            return l > 0 ? (h.show(), (b -= a) <= d && i.hide()) : l < 0 && (i.show(), (b += a) >= 0 && h.hide()), 
            j.animate({
                left: b + "px"
            }, 500), b;
        }
        var f = $(this).parent().attr("id"), g = "#" + f + " .slide_step", h = $("#" + f + " .left"), i = $("#" + f + " .right"), j = $(g), k = g + " li";
        if ($(this).hasClass("right")) var l = 1; else if ($(this).hasClass("left")) var l = -1;
        switch (f) {
          case "leftBlock":
            b = e(b);
            break;

          case "centralBlock":
            c = e(c);
            break;

          case "rightBlock":
            d = e(d);
            break;

          default:
            alert("Error");
        }
    });
}), $(function() {
    function a(a, b) {
        var c = a - .5 + Math.random() * (b - a + 1);
        return c = Math.round(c);
    }
    function b(a) {
        return Math.max.apply(Math, a);
    }
    function c(a, c) {
        var d = $(".grid"), e = d.width(), f = $(".grid-gutter").width(), g = Math.floor(e / 250), h = Math.floor(e - f * (g - 1)) / g, j = [];
        for (i = 0; i < g; i++) j[i] = 0;
        var k = 0;
        d.css({
            position: "relative"
        });
        for (var l in a) {
            var m = "cl" + l;
            for (a[l][2] = Math.floor(h * a[l][1]), a[l][3] = k + 1, a[l][4] = j[k], a[l][5] = Math.floor(k * (h + f)), 
            j[k] = j[k] + a[l][2] + f, jk = 0; jk < g; jk++) j[jk] < j[k] && (j[jk], k = jk);
            $("." + m).css({
                position: "absolute",
                top: a[l][4],
                left: a[l][5],
                width: h,
                height: a[l][2]
            });
        }
        var n = b(j);
        d.css({
            height: n,
            opacity: 1
        });
    }
    function d(b, d, e, g) {
        g && void 0 !== g && g.preventDefault(), $(".grid-item").remove(), $(".grid").css({
            opacity: 0
        });
        var h = b.length, i = 0;
        $.each(b, function(g, j) {
            var k = b[g].replace(/\+/gi, " "), l = "https://pixabay.com/api/?key=4534315-1446b5ff2fa21aef31d1c4233&image_type=photo&per_page=15&q=" + j, m = $(".grid");
            $.ajax({
                url: l,
                datatype: "jsonp",
                success: function(c) {
                    var g = c.hits;
                    if (0 !== g.length) {
                        var h = a(1, g.length) - 1, j = g[h].webformatURL, l = g[h].webformatWidth, n = g[h].webformatHeight, o = n / l;
                        f[i] = [ i, o, n, 1, 0, 0 ];
                        var p = "cl" + i;
                        i += 1, $("<div class='grid-item'><img class='new-image' src=" + j + "/><a>" + k + "</a></div>").appendTo(".grid").addClass(p), 
                        m.find("img.new-image").on("load", function() {
                            $(this).removeClass("new-image");
                        }).on("error", function() {
                            $(this).removeClass("new-image");
                        });
                    } else b[d] = e;
                },
                complete: function() {
                    !--h && m.find("img.new-image").length && c(f, i);
                }
            });
        });
    }
    $.support.cors = !0;
    var e = [ "Sport+and+Activity", "Beauty+and+Health", "Extreme+Sports", "Games", "Culture+and+Education", "Relaxation", "Travelling" ], f = {};
    d(e), $(window).resize(function() {
        c(f);
    }), $("#searchPictureForm").submit(function(b) {
        var c = a(1, e.length) - 1, f = $("#seachInput").val();
        changeElement = e[c], e[c] = f, d(e, c, changeElement);
    });
});